<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 正则表达式 · Persuing</title><meta name="description" content="正则表达式 - Persuing"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://Persuingsdu.github.io/atom.xml" title="Persuing"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/test/" target="_self" class="nav-list-link">PHOTO</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">正则表达式</h1><div class="post-info">Feb 6, 2018</div><div class="post-content"><link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h2 id="正则表达式的定义"><a href="#正则表达式的定义" class="headerlink" title="正则表达式的定义"></a>正则表达式的定义</h2><p>正则表达式（regular expression）是一个描述字符模式的对象。JavaScript的RegExp类表示正则表达式，<code>String</code>和<code>RegExp</code>都定义了方法，后者使用正则表达式进行更强大的<code>模式匹配</code>和<code>文本检索</code>和<code>替换功能</code>。<br><strong>直接字符量</strong><br><code>字母和数字字符 \o \t \n \v \f \r</code><br><strong>字符类</strong><br>将直接量字符直接放进方括号内就组成了字符类（character class）<br><code>[...] [^...] . \w \W \s \S \d \D</code><br><strong>重复</strong><br><code>{n,m} {n,} {n} ? + *</code><br>一些例子：<br><code>/\d{2,4}/</code> 匹配2~4个数字<br><code>/\w{3}\d/</code> 精确匹配三个单词和一个可选的数字<br><code>/\s+java\s+/</code> 匹配前后带有一个或者多个空格的字符串“java”<br><code>/[^(]*/</code> 匹配一个或多个非左括号的符号<br><strong>非贪婪的重复</strong><br><code>?? +? *? {1,5}?</code><br><code>/a+/</code>匹配<code>aaa</code>三个字符，不过<code>/a+?/</code>只匹配第一个。<br><code>/a+b/</code>和<code>/a+?b/</code>匹配<code>aaab</code>时都会匹配整个字符串，因为正则表达式的模式匹配总会寻找字符串中第一个可能匹配的位置。<br><strong>选择、分组和引用</strong><br>字符<code>|</code>用于分隔供选择的字符，<code>/d{3}|[a-z]{4}/</code>匹配的是三个数字或者四个小写字母。<br>从左到右匹配，如果左边的匹配就忽略右边的匹配项。<br>正则表达式中圆括号的作用：</p>
<ul>
<li>把单独的项组合成子表达式 <code>/java(script)?/</code></li>
<li>在完整的模式中定义子模式 <code>/[a-z]+(\d+)/</code></li>
<li>允许同一正则表达式的后部引用前面的表达式 <code>/([&#39;&quot;][^&#39;&quot;]*\1)/</code></li>
</ul>
<p><strong>指定匹配位置</strong><br><code>^ $ \b \B (?=p) (?!p)</code><br><strong>修饰符</strong><br><code>i g m</code></p>
<h2 id="用于模式匹配的String方法"><a href="#用于模式匹配的String方法" class="headerlink" title="用于模式匹配的String方法"></a>用于模式匹配的String方法</h2><p>String对象的一些用以执行正则表达式模式匹配和检索和替换操作的方法。<br>1.<code>search()</code>接受一个正则表达式，返回第一个与之匹配的字串的起始位置，若找不到匹配的字串，它将返回-1.<br>下面的调用返回值为4 <code>&quot;JavaScript&quot;.search(/script/i)</code><br>2.<code>replace()</code>方法用以执行检索和替换操作。接受两个参数：第一个是正则表达式，第二个为参数要进行替换的字符串。<br><code>txt.replace(/javascript/gi,&quot;JavaScript&quot;)</code><br>替换字符中出现了<code>$</code>加数字<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> txt=<span class="string">"\"javaScripT i jAvaScriPt\""</span>;</div><div class="line"><span class="keyword">var</span> quote=<span class="regexp">/"([^"]*)"/g</span>;</div><div class="line"><span class="built_in">console</span>.log(txt);<span class="comment">//"javaScripT i jAvaScriPt"</span></div><div class="line">txt=txt.replace(quote,<span class="string">'\'$1\''</span>);</div><div class="line"><span class="built_in">console</span>.log(txt);<span class="comment">//'javaScripT i jAvaScriPt'</span></div></pre></td></tr></table></figure></p>
<p>并且<code>replace()</code>的第二个参数可以是函数，该函数能够动态地计算替换字符串。<br>3.<code>match()</code>唯一的参数为正则表达式，返回的是一个由匹配结果组成的数组，如果正则表达式设置了修饰符<code>g</code>，则该方法返回的数组中包含字符中的所有匹配的结果。如果没有修饰符<code>g</code>，它只检索第一个匹配。<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> url=<span class="regexp">/(\w+):\/\/([\w.]+)\/(\S*)/</span>;</div><div class="line"><span class="keyword">var</span> text=<span class="string">"Visit my blog at http://www.example.com/~david"</span>;</div><div class="line"><span class="keyword">var</span> result=text.match(url);</div><div class="line"><span class="keyword">if</span>(result)&#123;</div><div class="line">    <span class="keyword">var</span> fullurl=result[<span class="number">0</span>];<span class="comment">//http://www.example.com/~david</span></div><div class="line">    <span class="keyword">var</span> protocol=result[<span class="number">1</span>];<span class="comment">//http </span></div><div class="line">    <span class="keyword">var</span> host=result[<span class="number">2</span>];<span class="comment">//www.example.com</span></div><div class="line">    <span class="keyword">var</span> path=result[<span class="number">3</span>];<span class="comment">//~david</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>a[0]</code>存放的是完整的匹配，<code>a[n]</code>存放的是<code>$n</code>的内容。<br>4.<code>splict()</code>这个方法用以调用它的字符串拆分为一个字串组成的数组。</p>
<h2 id="RegExp对象"><a href="#RegExp对象" class="headerlink" title="RegExp对象"></a>RegExp对象</h2><p>除了RegExp()构造函数之外，RegExp对象还支持三个方法和一个属性。<br>RegExp()构造函数带有两个字符串参数，其中第二个参数是可选的。<br><code>var zipcode=new RegExp(&quot;\\d{5}&quot;,&quot;g&quot;)</code>全局匹配字符串中的5个数字，注意这里用了<code>\\</code>,而不是<code>\</code>。<br><strong>属性</strong><br>1.<code>source</code>包含正则表达式的文本，只读。<br>2.<code>global</code>说明正则表达式是否带有修饰符g<br>3.<code>ignoreCase</code>说明正则表达式是否都带有修饰符i<br>4.<code>multiline</code>说明正则表达式是否带有修饰符m<br>5.<code>lastIndex</code>是一个可读/写的整数。如果匹配模式带有g修饰符，这个属性存储在整个字符串中下一个检索的开始位置，这个属性会被<code>exec()</code>和<code>test()</code>方法用到。</p>
<h2 id="RegExp方法"><a href="#RegExp方法" class="headerlink" title="RegExp方法"></a>RegExp方法</h2><p><code>exec()</code>返回一个数组，属性<code>index</code>包含了发生匹配的字符位置，属性<code>input</code>引用的是正在检索的字符串。<br>当同一个正则表达式第二次调用<code>exec()</code>时，它将从<code>lastIndex</code>属性所指示的字符串处开始检索。<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> pattern=<span class="regexp">/Java/g</span></div><div class="line"><span class="keyword">var</span> text=<span class="string">"JavaScript is more fun than Java!"</span>;</div><div class="line"><span class="keyword">var</span> result;</div><div class="line"><span class="keyword">while</span>((result=pattern.exec(text))!=<span class="literal">null</span>)&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"Matched'"</span>+result[<span class="number">0</span>]+<span class="string">"'"</span>+<span class="string">" at position "</span>+result.index+</div><div class="line">    <span class="string">"; next search at "</span>+pattern.lastIndex);</div><div class="line">    <span class="built_in">console</span>.log(result.input);<span class="comment">//JavaScript is more fun than Java!</span></div><div class="line">&#125;</div><div class="line"><span class="comment">//Matched'Java' at position 0; next search at 4</span></div><div class="line"><span class="comment">//Matched'Java' at position 28; next search at 32</span></div></pre></td></tr></table></figure></p>
<p><code>test()</code>使用<br><figure class="highlight javascript"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> pattern=<span class="regexp">/java/i</span>;</div><div class="line">patter.test(<span class="string">"JavaScript"</span>);</div></pre></td></tr></table></figure></p>
<p><a href="https://zh.wikipedia.org/wiki/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F" target="_blank" rel="external">更多参考</a><br>以上内容源于《JavaScript权威指南》</p>
</div></article></div></main><footer><div class="paginator"><a href="/2018/02/07/DOM/" class="prev">PREV</a><a href="/2018/02/05/面向对象程序设计/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2018 <a href="http://Persuingsdu.github.io">Persuing</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>