<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Trie · Persuing</title><meta name="description" content="Trie - Persuing"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://Persuingsdu.github.io/atom.xml" title="Persuing"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Trie</h1><div class="post-info">Dec 24, 2017</div><div class="post-content"><p><strong>字典樹</strong><br><a id="more"></a><br>學習了一下字典樹的簡單實現方式<br><a href="http://blog.csdn.net/sunnyyoona/article/details/43900425" target="_blank" rel="external">Reference</a><br><strong>节点的定义</strong><br><figure class="highlight c++"><table><tr><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">define</span> Maxn 26</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">trieNode</span> &#123;</span></div><div class="line">	<span class="keyword">int</span> count;<span class="comment">//以该节点为结尾的单词的个数</span></div><div class="line">	trieNode* next[Maxn];</div><div class="line">	trieNode(<span class="keyword">int</span> x) &#123;</div><div class="line">		count = x;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; Maxn; i++)</div><div class="line">			next[i] = <span class="literal">NULL</span>;</div><div class="line">	&#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p><strong>在字典中插入新的字符串</strong><br><figure class="highlight c++"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(trieNode* &amp;root, <span class="built_in">string</span> str)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> size = str.size();</div><div class="line">	<span class="keyword">int</span> index;</div><div class="line">	trieNode* p = root;<span class="comment">//根节点</span></div><div class="line">	<span class="comment">//一个一个字符插入</span></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</div><div class="line">		index = str[i] - <span class="string">'a'</span>;<span class="comment">//26个字母中的位置</span></div><div class="line">		<span class="keyword">if</span> (p-&gt;next[index]==<span class="literal">NULL</span>) </div><div class="line">			p-&gt;next[index] = <span class="keyword">new</span> trieNode(<span class="number">0</span>);<span class="comment">//创建</span></div><div class="line">		p = p-&gt;next[index];</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//以该字符为结尾的单词</span></div><div class="line">	p-&gt;count++;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>刪除字典中的元素</strong><br><figure class="highlight c++"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">del</span><span class="params">(trieNode* &amp;root, <span class="built_in">string</span> str)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> size = str.size();</div><div class="line">	<span class="keyword">int</span> index;</div><div class="line">	trieNode* p = root;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</div><div class="line">		index = str[i] - <span class="string">'a'</span>;</div><div class="line">		<span class="keyword">if</span> (p-&gt;next[index] == <span class="literal">NULL</span>)</div><div class="line">			<span class="keyword">return</span>;</div><div class="line">		p = p-&gt;next[index];</div><div class="line">	&#125;</div><div class="line">	p-&gt;count--;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>查找字典中是否存在某個字符串</strong><br><figure class="highlight c++"><table><tr><td class="code"><pre><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">search</span><span class="params">(trieNode* root, <span class="built_in">string</span> str)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (root == <span class="literal">NULL</span>) &#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> size = str.size();</div><div class="line">	trieNode *p = root;</div><div class="line">	<span class="keyword">int</span> index;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</div><div class="line">		index = str[i] - <span class="string">'a'</span>;</div><div class="line">		<span class="comment">// 无法转移到下一个字符</span></div><div class="line">		<span class="keyword">if</span> (p-&gt;next[index] == <span class="literal">NULL</span>) &#123;</div><div class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</div><div class="line">		&#125;<span class="comment">//if</span></div><div class="line">		 <span class="comment">// 继续下一个字符</span></div><div class="line">		p = p-&gt;next[index];</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">return</span> p-&gt;count &gt; <span class="number">0</span>;<span class="comment">//是否有</span></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>遍曆輸出整個字典</strong><br><figure class="highlight c++"><table><tr><td class="code"><pre><div class="line"><span class="comment">//利用递归程序查询整个字典</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">printDic</span><span class="params">(trieNode* root, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt;&gt; &amp;words, <span class="built_in">vector</span>&lt;<span class="keyword">char</span>&gt; &amp;word)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (root == <span class="literal">NULL</span>) &#123;</div><div class="line">		<span class="keyword">return</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">if</span> (root-&gt;count &gt; <span class="number">0</span>) &#123;</div><div class="line">		words.push_back(word);</div><div class="line">	&#125;<span class="comment">//到了根且有值</span></div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">26</span>; ++i) &#123;</div><div class="line">		<span class="keyword">if</span> (root-&gt;next[i]) &#123;<span class="comment">//26个循环</span></div><div class="line">			word.push_back(<span class="string">'a'</span> + i);</div><div class="line">			printDic(root-&gt;next[i], words, word);</div><div class="line">			word.pop_back();<span class="comment">//回溯</span></div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><strong>LeetCode上的相關題目</strong><br><a href="https://leetcode.com/problems/map-sum-pairs/description/" target="_blank" rel="external">一.題目鏈接</a><br>使用字典樹的解法<br><figure class="highlight c++"><table><tr><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">define</span> Maxn 26</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></div><div class="line">	<span class="keyword">int</span> count;</div><div class="line">	<span class="keyword">int</span> value;</div><div class="line">	node* next[Maxn];</div><div class="line">	node(<span class="keyword">int</span> x) &#123;</div><div class="line">		count = x;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; Maxn; i++)</div><div class="line">			next[i] = <span class="literal">NULL</span>;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MapSum</span> &#123;</span></div><div class="line"><span class="keyword">public</span>:</div><div class="line">    <span class="comment">/** Initialize your data structure here. */</span></div><div class="line">    MapSum() &#123;</div><div class="line">		root = <span class="keyword">new</span> node(<span class="number">0</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(<span class="built_in">string</span> key, <span class="keyword">int</span> val)</span> </span>&#123;</div><div class="line">		<span class="keyword">int</span> size = key.size();</div><div class="line">		<span class="keyword">int</span> index;</div><div class="line">		node* p = root;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</div><div class="line">			index = key[i] - <span class="string">'a'</span>;</div><div class="line">			<span class="keyword">if</span> (p-&gt;next[index] == <span class="literal">NULL</span>)</div><div class="line">				p-&gt;next[index] = <span class="keyword">new</span> node(<span class="number">0</span>);</div><div class="line">			p = p-&gt;next[index];</div><div class="line">		&#125;</div><div class="line">		p-&gt;count++;</div><div class="line">		p-&gt;value = val;</div><div class="line">	&#125;</div><div class="line">	<span class="function">node* <span class="title">help</span><span class="params">(<span class="built_in">string</span> prefix)</span> </span>&#123;</div><div class="line">		<span class="keyword">int</span> size = prefix.size();</div><div class="line">		<span class="keyword">int</span> index;</div><div class="line">		node* p = root;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</div><div class="line">			index = prefix[i] - <span class="string">'a'</span>;</div><div class="line">			<span class="keyword">if</span> (p-&gt;next[index] == <span class="literal">NULL</span>)</div><div class="line">				<span class="keyword">return</span> <span class="literal">NULL</span>;</div><div class="line">			p = p-&gt;next[index];</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">return</span> p;<span class="comment">//有该前缀</span></div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">void</span> <span class="title">search</span><span class="params">(node* root,<span class="keyword">int</span>&amp; res)</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span> (root == <span class="literal">NULL</span>)<span class="comment">//空</span></div><div class="line">			<span class="keyword">return</span>;</div><div class="line">		<span class="keyword">if</span> (root-&gt;count &gt; <span class="number">0</span>)</div><div class="line">			res += root-&gt;value;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; Maxn; i++)</div><div class="line">			<span class="keyword">if</span> (root-&gt;next[i])</div><div class="line">				search(root-&gt;next[i], res);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="built_in">string</span> prefix)</span> </span>&#123;</div><div class="line">		<span class="keyword">int</span> res = <span class="number">0</span>;</div><div class="line">		node* current = help(prefix);</div><div class="line">		search(current,res);</div><div class="line">		<span class="keyword">return</span> res;</div><div class="line">	&#125;</div><div class="line"><span class="keyword">private</span>:</div><div class="line">	node* root;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p><a href="https://leetcode.com/problems/replace-words/description/" target="_blank" rel="external">二.題目鏈接</a><br><img src="/img/leetcode.png" alt="Runtime"><br><figure class="highlight c++"><table><tr><td class="code"><pre><div class="line"><span class="meta">#<span class="meta-keyword">define</span> maxn 26</span></div><div class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span> &#123;</span></div><div class="line">	<span class="keyword">int</span> count;</div><div class="line">	node* next[maxn];</div><div class="line">	node(<span class="keyword">int</span> x) &#123;</div><div class="line">		count = x;</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; maxn; i++)</div><div class="line">			next[i] = <span class="literal">NULL</span>;</div><div class="line">	&#125;</div><div class="line">&#125;;</div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">insert</span><span class="params">(node* root,<span class="built_in">string</span> str)</span></span>&#123;</div><div class="line">	<span class="keyword">int</span> size = str.size();</div><div class="line">	<span class="keyword">int</span> index;</div><div class="line">	node* p = root;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++) &#123;</div><div class="line">		index = str[i] - <span class="string">'a'</span>;</div><div class="line">		<span class="keyword">if</span> (p-&gt;next[index] == <span class="literal">NULL</span>)</div><div class="line">			p-&gt;next[index] = <span class="keyword">new</span> node(<span class="number">0</span>);</div><div class="line">		p = p-&gt;next[index];</div><div class="line">	&#125;</div><div class="line">	p-&gt;count++;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">search</span><span class="params">(node* &amp;root, <span class="keyword">char</span> c)</span> </span>&#123;</div><div class="line">	<span class="keyword">if</span> (root == <span class="literal">NULL</span>) &#123;</div><div class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">int</span> index = c - <span class="string">'a'</span>;</div><div class="line">	<span class="keyword">if</span> (root-&gt;next[index] == <span class="literal">NULL</span>)</div><div class="line">		<span class="keyword">return</span> <span class="number">-1</span>;<span class="comment">//不存在</span></div><div class="line">	root = root-&gt;next[index];</div><div class="line">	<span class="keyword">if</span> (root-&gt;count &gt; <span class="number">0</span>)</div><div class="line">		<span class="keyword">return</span> <span class="number">1</span>;<span class="comment">//存在</span></div><div class="line">	<span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//可能存在</span></div><div class="line">&#125;</div><div class="line"><span class="function"><span class="built_in">string</span> <span class="title">replaceWords</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;&amp; dict, <span class="built_in">string</span> sentence)</span> </span>&#123;</div><div class="line">	<span class="keyword">int</span> size = dict.size();</div><div class="line">	node* root = <span class="keyword">new</span> node(<span class="number">0</span>);</div><div class="line">	<span class="built_in">string</span> res = <span class="string">""</span>;</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; i++)</div><div class="line">		insert(root, dict[i]);</div><div class="line">	<span class="keyword">int</span> keysize = sentence.size();</div><div class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; keysize; ) &#123;</div><div class="line">		node* p = root;</div><div class="line">		<span class="built_in">string</span> element = <span class="string">""</span>;</div><div class="line">		<span class="keyword">bool</span> tag = <span class="literal">false</span>;</div><div class="line">		<span class="keyword">while</span> (j &lt; keysize &amp;&amp; sentence[j] != <span class="string">' '</span>) &#123;</div><div class="line">			element += sentence[j];</div><div class="line">			<span class="keyword">int</span> com = search(p, sentence[j]);</div><div class="line">			<span class="keyword">if</span> (com==<span class="number">-1</span>) &#123;</div><div class="line">				j++;</div><div class="line">				<span class="keyword">while</span> (j&lt;keysize &amp;&amp; sentence[j] != <span class="string">' '</span>) &#123;</div><div class="line">					element += sentence[j];</div><div class="line">					j++;</div><div class="line">				&#125;</div><div class="line">				res += element;</div><div class="line">				res += <span class="string">" "</span>;</div><div class="line">				tag = <span class="literal">true</span>;</div><div class="line">				<span class="keyword">break</span>;	</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">if</span> (com == <span class="number">0</span>) &#123;</div><div class="line">				<span class="comment">//do noing</span></div><div class="line">			&#125;</div><div class="line">			<span class="keyword">if</span> (com == <span class="number">1</span>) &#123;</div><div class="line">				res += element;</div><div class="line">				res += <span class="string">" "</span>;</div><div class="line">				tag = <span class="literal">true</span>;</div><div class="line">				<span class="keyword">while</span> (j&lt;keysize &amp;&amp; sentence[j] != <span class="string">' '</span>)</div><div class="line">					j++;</div><div class="line">				<span class="keyword">break</span>;</div><div class="line">			&#125;</div><div class="line">			j++;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span> (!tag) &#123;</div><div class="line">			res += element;</div><div class="line">			res += <span class="string">" "</span>;</div><div class="line">		&#125;</div><div class="line">		j++;</div><div class="line">	&#125;</div><div class="line">	res.pop_back();</div><div class="line">	<span class="keyword">return</span> res;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</div></article></div></main><footer><div class="paginator"><a href="/2018/01/26/随笔/" class="prev">PREV</a></div><div class="copyright"><p>© 2015 - 2018 <a href="http://Persuingsdu.github.io">Persuing</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>